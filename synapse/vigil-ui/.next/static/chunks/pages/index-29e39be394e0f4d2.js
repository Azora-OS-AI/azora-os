(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(9828)}])},9828:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return w}});var r=s(5893),i=s(7294),n=s(3454),a=s(762),l=s(3100),c=s(6788),o=s(3715),d=s(1258),h=s(990),x=s(1919),u=s(1873),m=s(4677),Z=s(7407),j=s(5301),g=s(7876),p=s(7527),v=s(7066);let f=(0,p.ZP)(n.Z)(e=>{let{theme:t}=e;return{padding:t.spacing(2),margin:t.spacing(1),height:"100%"}}),y=(0,p.ZP)(a.Z)(e=>{let{theme:t}=e;return{margin:t.spacing(1),cursor:"pointer","&:hover":{boxShadow:t.shadows[4]}}});function w(){let[e,t]=(0,i.useState)([]),[s,n]=(0,i.useState)([]),[p,w]=(0,i.useState)(!0),[b,S]=(0,i.useState)(null),P="http://localhost:3005";(0,i.useEffect)(()=>{_()},[]);let _=async()=>{try{w(!0);let[e,s]=await Promise.all([v.Z.get("".concat(P,"/api/vigil/cameras")),v.Z.get("".concat(P,"/api/vigil/alerts?limit=10"))]);t(e.data),n(s.data),S(null)}catch(e){S("Failed to load dashboard data"),console.error("Dashboard error:",e)}finally{w(!1)}},B=async e=>{try{await v.Z.post("".concat(P,"/api/vigil/streams/").concat(e,"/start")),_()}catch(e){console.error("Failed to start stream:",e)}},C=e=>{switch(e){case"high":return"error";case"medium":return"warning";case"low":return"info";default:return"default"}};return p?(0,r.jsxs)(l.Z,{maxWidth:"lg",sx:{mt:4},children:[(0,r.jsx)(c.Z,{variant:"h4",gutterBottom:!0,children:"Vigil Dashboard"}),(0,r.jsx)(c.Z,{children:"Loading..."})]}):(0,r.jsxs)(l.Z,{maxWidth:"lg",sx:{mt:4},children:[(0,r.jsx)(c.Z,{variant:"h4",gutterBottom:!0,children:"Vigil - AI Surveillance Dashboard"}),b&&(0,r.jsx)(o.Z,{severity:"error",sx:{mb:2},children:b}),(0,r.jsxs)(d.ZP,{container:!0,spacing:3,children:[(0,r.jsx)(d.ZP,{item:!0,xs:12,md:6,children:(0,r.jsxs)(f,{children:[(0,r.jsxs)(c.Z,{variant:"h6",gutterBottom:!0,children:["Cameras (",e.length,")"]}),(0,r.jsx)(h.Z,{sx:{maxHeight:400,overflow:"auto"},children:e.map(e=>(0,r.jsx)(y,{children:(0,r.jsxs)(x.Z,{children:[(0,r.jsx)(c.Z,{variant:"subtitle1",children:e.hostname}),(0,r.jsx)(u.Z,{label:e.status,color:"connected"===e.status?"success":"error",size:"small",sx:{mr:1}}),(0,r.jsx)(m.Z,{size:"small",variant:"outlined",onClick:()=>B(e.id),disabled:"connected"!==e.status,children:"Start AI"})]})},e.id))})]})}),(0,r.jsx)(d.ZP,{item:!0,xs:12,md:6,children:(0,r.jsxs)(f,{children:[(0,r.jsx)(c.Z,{variant:"h6",gutterBottom:!0,children:"Recent Alerts"}),(0,r.jsx)(Z.Z,{sx:{maxHeight:400,overflow:"auto"},children:s.map(e=>(0,r.jsx)(j.ZP,{divider:!0,children:(0,r.jsx)(g.Z,{primary:(0,r.jsxs)(h.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,r.jsx)(c.Z,{variant:"subtitle2",children:e.type.split(".").pop()}),(0,r.jsx)(u.Z,{label:e.severity,color:C(e.severity),size:"small"})]}),secondary:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.Z,{variant:"body2",color:"text.secondary",children:new Date(e.time).toLocaleString()}),(0,r.jsxs)(c.Z,{variant:"body2",children:["Camera: ",e.source.split("/").pop()," | Confidence: ",(100*e.confidence).toFixed(1),"%"]})]})})},e.id))})]})}),(0,r.jsx)(d.ZP,{item:!0,xs:12,children:(0,r.jsxs)(f,{children:[(0,r.jsx)(c.Z,{variant:"h6",gutterBottom:!0,children:"System Status"}),(0,r.jsxs)(d.ZP,{container:!0,spacing:2,children:[(0,r.jsx)(d.ZP,{item:!0,xs:12,sm:4,children:(0,r.jsx)(a.Z,{children:(0,r.jsxs)(x.Z,{children:[(0,r.jsx)(c.Z,{color:"textSecondary",gutterBottom:!0,children:"Active Streams"}),(0,r.jsx)(c.Z,{variant:"h5",children:e.filter(e=>"connected"===e.status).length})]})})}),(0,r.jsx)(d.ZP,{item:!0,xs:12,sm:4,children:(0,r.jsx)(a.Z,{children:(0,r.jsxs)(x.Z,{children:[(0,r.jsx)(c.Z,{color:"textSecondary",gutterBottom:!0,children:"Today's Alerts"}),(0,r.jsx)(c.Z,{variant:"h5",children:s.length})]})})}),(0,r.jsx)(d.ZP,{item:!0,xs:12,sm:4,children:(0,r.jsx)(a.Z,{children:(0,r.jsxs)(x.Z,{children:[(0,r.jsx)(c.Z,{color:"textSecondary",gutterBottom:!0,children:"System Health"}),(0,r.jsx)(c.Z,{variant:"h5",color:"success.main",children:"Online"})]})})})]})]})})]})]})}}},function(e){e.O(0,[289,888,774,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);